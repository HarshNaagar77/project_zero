;/*FB_PKG_DELIM*/

__d("IGDMessageButton.react",["IGDSIconButton.react","IGDSTooltip.react","PolarisIGCorePressable.react","PolarisUA","react","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useState,k=b.c,l={button:{opacity:"x15vok9n",":active_opacity":"x4gyw5p",":hover_opacity":"x1o7uuvo",$$css:!0},buttonWithHover:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"xxk0z11",opacity:"x1hc1fzr",width:"xvy4d1p",":hover_backgroundColor":"x15vn3sj",$$css:!0}};function a(a){var b=k(21),e,f,g;b[0]!==a?(g=a.label,e=a.xstyle,f=babelHelpers.objectWithoutPropertiesLoose(a,["label","xstyle"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g):(e=b[1],f=b[2],g=b[3]);a=j(!1);var h=a[0],m=a[1];b[4]!==e?(a=[l.button,l.buttonWithHover,e],b[4]=e,b[5]=a):a=b[5];b[6]!==f||b[7]!==a?(e=i.jsx(c("IGDSIconButton.react"),babelHelpers["extends"]({},f,{xstyle:a})),b[6]=f,b[7]=a,b[8]=e):e=b[8];f=e;a=c("useCurrentDisplayMode")();e=a==="dark";a=e?"primary":"black";b[9]!==h?(e=d("PolarisUA").isMobile()?!1:h,b[9]=h,b[10]=e):e=b[10];var n,o;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(){m(!0)},n=function(){m(!1)},o=function(){},b[11]=h,b[12]=n,b[13]=o):(h=b[11],n=b[12],o=b[13]);b[14]!==f?(h=i.jsx(c("PolarisIGCorePressable.react"),{onMouseEnter:h,onMouseLeave:n,onPress:o,children:f}),b[14]=f,b[15]=h):h=b[15];b[16]!==a||b[17]!==e||b[18]!==g||b[19]!==h?(n=i.jsx(c("IGDSTooltip.react"),{align:"middle",color:a,isVisible:e,position:"above",tooltip:g,children:h}),b[16]=a,b[17]=e,b[18]=g,b[19]=h,b[20]=n):n=b[20];return n}g["default"]=a}),98);
__d("IGDMessageMoreContextMenuButton.react",["fbt","IGDMessageButton.react","IGDSLazyPopoverTrigger.react","IGDSMoreVerticalPanoOutline24Icon.react","IGDThreadListNewMessageLoggingDataContext","Int64Hooks","MessengerWebUXLogger","getInstamadilloLoggingExtraData","react","requireDeferred"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l=c("requireDeferred")("IGDMessageContextMenu.react").__setRef("IGDMessageMoreContextMenuButton.react");function a(a){var b=j(16),e=a.message,f=a.outgoing,g=a.thread;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__nNxAei6AI9v__JHASH__"),b[0]=a):a=b[0];var i=a,m=c("MessengerWebUXLogger").useInteractionLogger(),n=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),o;b[1]!==m||b[2]!==g||b[3]!==e.messageId||b[4]!==n?(a=function(a){m==null?void 0:m({eventName:"open_message_options",extraData:babelHelpers["extends"]({},c("getInstamadilloLoggingExtraData")(g),{message_id:e.messageId}),flowInstanceId:n}),a()},o=[m,g,e.messageId,n],b[1]=m,b[2]=g,b[3]=e.messageId,b[4]=n,b[5]=a,b[6]=o):(a=b[5],o=b[6]);var p=d("Int64Hooks").useCallbackInt64(a,o);a=f?"end":"start";b[7]!==e||b[8]!==g?(o={message:e,thread:g},b[7]=e,b[8]=g,b[9]=o):o=b[9];b[10]!==p?(f=function(a,b){return k.jsx(c("IGDMessageButton.react"),{innerRef:a,label:i,onClick:function(){return p(b)},children:k.jsx(c("IGDSMoreVerticalPanoOutline24Icon.react"),{alt:i,color:"ig-primary-text","data-testid":void 0,size:16})})},b[10]=p,b[11]=f):f=b[11];var q;b[12]!==a||b[13]!==o||b[14]!==f?(q=k.jsx(c("IGDSLazyPopoverTrigger.react"),{align:a,popoverProps:o,popoverResource:l,popoverType:"menu",position:"above",children:f}),b[12]=a,b[13]=o,b[14]=f,b[15]=q):q=b[15];return q}g["default"]=a}),226);
__d("IGDMessageReactionButton.react",["fbt","EmojiFormat.bs","IGDMessageButton.react","IGDSFace2OutlineIcon.react","IGDSLazyPopoverTrigger.react","IGDThreadListNewMessageLoggingDataContext","Int64Hooks","MWLSThread","MWV2MessageReactionHooks","MessengerWebUXLogger","UnicodeUtils","asyncToGeneratorRuntime","emptyFunction","getInstamadilloLoggingExtraData","promiseDone","react","requireDeferred","useAsyncReStore","useIGDGlobalReactMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));e=i;e.useCallback;var l=e.c,m=c("requireDeferred")("IGDComposerEmojiPicker.react").__setRef("IGDMessageReactionButton.react");function a(a){var e=l(23),f=a.message,g=a.outgoing,i=a.setReactionsMenuOpen,n=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReaction(f),o=c("useIGDGlobalReactMessage")(f,"reaction_tray");e[0]!==n||e[1]!==o?(a=function(a){var b=d("EmojiFormat.bs").codeArrayToUnicode(a);if(n!=null){var e=(j||(j=d("UnicodeUtils"))).getCodePoints(n);b===n&&(b=void 0);e[0]===10084&&a[0]===10084&&(b=void 0)}c("promiseDone")(o(b,"reaction"))},e[0]=n,e[1]=o,e[2]=a):a=e[2];a=a;g=g?"end":"start";var p;e[3]!==a||e[4]!==f.threadKey?(p={closeAfterSelect:!0,onClose:c("emptyFunction"),onSelect:a,showPopoverArrow:!1,threadKey:f.threadKey},e[3]=a,e[4]=f.threadKey,e[5]=p):p=e[5];a=p;e[6]===Symbol["for"]("react.memo_cache_sentinel")?(p=h._("__JHASH__lHWykrNu5cj__JHASH__"),e[6]=p):p=e[6];var q=p,r=c("MessengerWebUXLogger").useInteractionLogger(),s=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),t=c("useAsyncReStore")(),u;e[7]!==t||e[8]!==f.threadKey||e[9]!==f.messageId||e[10]!==r||e[11]!==s?(p=function(a){c("promiseDone")(t.then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("MWLSThread").getThreadAsync(a,f.threadKey));a&&(r==null?void 0:r({eventName:"reaction_open_emoji_picker",extraData:babelHelpers["extends"]({},c("getInstamadilloLoggingExtraData")(a),{message_id:f.messageId}),flowInstanceId:s}))});return function(b){return a.apply(this,arguments)}}())),a()},u=[t,f.threadKey,f.messageId,r,s],e[7]=t,e[8]=f.threadKey,e[9]=f.messageId,e[10]=r,e[11]=s,e[12]=p,e[13]=u):(p=e[12],u=e[13]);var v=d("Int64Hooks").useCallbackInt64(p,u);e[14]!==i?(p=function(a){return i(function(){return a})},e[14]=i,e[15]=p):p=e[15];e[16]!==v?(u=function(a,b){return k.jsx(c("IGDMessageButton.react"),{innerRef:a,label:q,onClick:function(){return v(b)},children:k.jsx(c("IGDSFace2OutlineIcon.react"),{alt:q,color:"ig-primary-text","data-testid":void 0,size:16})})},e[16]=v,e[17]=u):u=e[17];var w;e[18]!==g||e[19]!==p||e[20]!==a||e[21]!==u?(w=k.jsx(c("IGDSLazyPopoverTrigger.react"),{align:g,onVisibilityChange:p,popoverProps:a,popoverResource:m,popoverType:"dialog",position:"above",children:u}),e[18]=g,e[19]=p,e[20]=a,e[21]=u,e[22]=w):w=e[22];return w}g["default"]=a}),226);
__d("IGDMessageReplyButton.react",["IGDInstamadilloUtils","IGDMessageButton.react","IGDSReplyPanoOutline24Icon.react","react","useIGDMessageReply.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(6),e=a.message,f=a.onClose;a=a.thread;f=c("useIGDMessageReply.react")(e,a,f);var g=f[0];f=f[1];a=d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a);if(!d("IGDInstamadilloUtils").shouldRenderMessageReply(e,a))return null;b[0]!==f?(e=j.jsx(c("IGDSReplyPanoOutline24Icon.react"),{alt:f,color:"ig-primary-text","data-testid":void 0,size:16}),b[0]=f,b[1]=e):e=b[1];b[2]!==f||b[3]!==g||b[4]!==e?(a=j.jsx(c("IGDMessageButton.react"),{label:f,onClick:g,children:e}),b[2]=f,b[3]=g,b[4]=e,b[5]=a):a=b[5];return a}g["default"]=a}),98);
__d("useMWPCanRemoveMessageGlobally",["I64","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWPThreadCapabilitiesContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),e=b.canUnsendMessage;b=b.isPaused;a=a.cannotUnsendReason!=null?(h||(h=d("I64"))).equal(a.cannotUnsendReason,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0;return e&&a&&!b}g["default"]=a}),98);
__d("useShowPersistentGenAIFeedbackButtons",["ReQL","ReQLSuspense","useGenAIFeedbackSubmissionStatus","useIsGenAiFeedbackEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var g=(h||(h=c("useReStore")))();e=c("useIsGenAiFeedbackEnabled")(b,e);var i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(g.tables.messages.index("threadKeyPrimarySortKeySecondarySortKeyBotResponseId"),["botResponseId"]).getKeyRange(a)},[g,a],f.id+":43"),j=c("useGenAIFeedbackSubmissionStatus")(b);return e&&(i==null?void 0:i.botResponseId)===b&&j==null}g["default"]=a}),98);
__d("IGDMessageRowActions.react",["I64","IGDInstamadilloUtils","IGDMessageMoreContextMenuButton.react","IGDMessageReactionButton.react","IGDMessageReplyButton.react","LSBitFlag","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessageReplySourceTypeV2","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWPActor.react","MWPBaseMessageListRowActions.react","MWPMessageHasAttachment","MessagingAttachmentType","PolarisUA","ReQL","ReQLSuspense","cr:2097","cr:968","gkx","react","useGenAIFeedbackSubmissionStatus","useIGDIsGenAiReelsPlugin","useIsGenAiFeedbackEnabled","useIsReadOnlyFeatureLimited","useIsThreadBlocked","useMWPCanRemoveMessageGlobally","useReStore","useShowPersistentGenAIFeedbackButtons"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useState,n=c("gkx")("664")===!0,o=[(k||(k=d("LSIntEnum"))).ofNumber(1),k.ofNumber(16384),k.ofNumber(2),k.ofNumber(4)];function p(a){var e=a.message,g=a.outgoing,i=a.setReactionsMenuOpen;a=a.thread;var m=(h||(h=c("useReStore")))(),p=d("MWPActor.react").useActor(),q=c("useIsThreadBlocked")(),r=c("useIsReadOnlyFeatureLimited")(),s=a.threadKey,t=a.threadType,u=e.displayedContentTypes,v=e.messageId,w=e.senderId,x=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(m.tables.contacts,["blockedByViewerStatus","capabilities","capabilities2"]).getKeyRange(w)},[m,w],f.id+":96"),y=c("MWPMessageHasAttachment")(e),z=d("ReQLSuspense").useFirst(function(){return y?d("ReQL").fromTableAscending(m.tables.attachments,["attachmentType","isSharable"]).getKeyRange(s,v):d("ReQL").empty()},[m,s,v,y],f.id+":108");p=(j||(j=d("I64"))).equal(w,p);t=!p&&d("LSMessagingThreadTypeUtil").isOneToOne(t)&&x!=null?!(j||(j=d("I64"))).equal(x.blockedByViewerStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)):!1;var A=x!=null&&d("LSContactBitOffset").has(66,x);x=x!=null&&d("LSContactBitOffset").has(18,x);var B=d("LSMessagingThreadTypeUtil").isIGDMessageRequest(a);x=x&&!p&&o.findIndex(function(a){return(j||(j=d("I64"))).equal(u,a)})!==-1;var C=z!=null&&((j||(j=d("I64"))).equal(z.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(j||(j=d("I64"))).equal(z.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))),D=z!=null&&(j||(j=d("I64"))).equal(z.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)),E=(j||(j=d("I64"))).equal(u,d("LSBitFlag").empty)&&!C;p=c("useMWPCanRemoveMessageGlobally")(e)&&p;z=z!=null&&(j||(j=d("I64"))).equal(z.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))?z.isSharable:!0;var F=e.replySourceTypeV2!=null&&(k||(k=d("LSIntEnum"))).toNumber(e.replySourceTypeV2)===c("LSMessageReplySourceTypeV2").FORWARD,G=(j||(j=d("I64"))).equal(u,(k||(k=d("LSIntEnum"))).ofNumber(1))||(j||(j=d("I64"))).equal(u,(k||(k=d("LSIntEnum"))).ofNumber(1033));G=G||F&&!!e.text;F=!q&&!A&&!B&&!r&&!e.isUnsent&&!E&&d("LSThreadBitOffset").has(103,a)&&z&&!t&&!(j||(j=d("I64"))).equal(e.displayedContentTypes,(k||(k=d("LSIntEnum"))).ofNumber(256))&&!C&&!D;z=c("useIsGenAiFeedbackEnabled")(e.botResponseId,n);t=c("useGenAIFeedbackSubmissionStatus")(e.botResponseId);C=z&&t==null;D=!d("PolarisUA").isMobile()&&C;z=D&&b("cr:2097")?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(b("cr:2097"),{message:e})}):null;t=D&&b("cr:968")?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(b("cr:968"),{message:e})}):null;C=!q&&!A&&!B&&!r&&d("LSThreadBitOffset").has(42,a)&&!e.isUnsent&&!E&&!D;var H=d("LSThreadBitOffset").has(18,a),I=d("LSThreadBitOffset").has(139,a),J=d("LSThreadBitOffset").has(169,a);q=!q&&!A&&!B&&!r&&!e.isUnsent&&!E&&(I?J:H)&&!D;A=c("gkx")("24015");B=A||!E&&(F||p||G||x);r=q?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("IGDMessageReactionButton.react"),{message:e,outgoing:g,setReactionsMenuOpen:i})}):null;I=C?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("IGDMessageReplyButton.react"),{message:e,thread:a})}):null;J=B?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("IGDMessageMoreContextMenuButton.react"),{message:e,outgoing:g,thread:a})}):null;return l.jsxs(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsList,{outgoing:g,children:[z,t,r,I,J]})}p.displayName=p.name+" [from "+f.id+"]";function q(a){var b=a.ariaHidden;b=b===void 0?!1:b;var e=a.focused,f=a.hidden;f=f===void 0?!1:f;var g=a.hovered,h=a.message,i=a.outgoing;a=a.thread;var j=m(!1),k=j[0];j=j[1];var n=c("useIsGenAiFeedbackEnabled")(h.botResponseId,c("gkx")("664")===!0),o=c("useGenAIFeedbackSubmissionStatus")(h.botResponseId),q=c("useIGDIsGenAiReelsPlugin")(h),r=c("useShowPersistentGenAIFeedbackButtons")(h.threadKey,h.botResponseId,c("gkx")("664")===!0);q=q?!1:d("PolarisUA").isMobile()?n&&o==null:r;n=g||e||k;o=!f&&(n||q);return l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsContainer,{ariaHidden:b,outgoing:i,visibility:n===!0?"full":"partial",children:o?l.jsx(p,{message:h,outgoing:i,setReactionsMenuOpen:j,thread:a}):null})}q.displayName=q.name+" [from "+f.id+"]";function a(a){var b=a.ariaHidden;b=b===void 0?!1:b;var e=a.focused,g=a.hidden;g=g===void 0?!1:g;var i=a.hovered,j=a.message;a=a.outgoing;var k=(h||(h=c("useReStore")))(),m=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(k.tables.threads,["parentThreadKey","threadKey","threadSubtype","cannotUnsendReason","consistentThreadFbid","threadType"].concat(d("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(j.threadKey)},[k,j.threadKey],f.id+":418"),n=d("IGDInstamadilloUtils").canMutateIGDMessage(j);return m!=null&&n?l.jsx(q,{ariaHidden:b,focused:e,hidden:g,hovered:i,message:j,outgoing:a,thread:m}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);