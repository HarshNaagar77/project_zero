;/*FB_PKG_DELIM*/

__d("LSGetFirstAvailableAdminMessageCTAID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(a){return b.sequence([function(a){return b.db.table(27).fetchDesc([[[]],"ctaId"]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=b.i64.cast([0,1]):(d=a.item,c[0]=b.i64.add(d.ctaId,b.i64.cast([0,1])))})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxGetFirstAvailableAdminMessageCTAIDStoredProcedure";e.exports=a}),null);
__d("LSApplyAdminMessageCTA",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSGetFirstAvailableAdminMessageCTAID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.storedProcedure(b("LSGetFirstAvailableAdminMessageCTAID")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(27).put({threadKey:a[0],messageId:a[2],ctaId:d[0],timestampMs:a[1],adClientToken:a[5],adPreferenceUrl:a[6],adHelpUrl:a[7],showAdChoiceIcon:a[8],title:a[3],actionUrl:a[9],adminMessageNicknameParticipantId:a[10],targetId:a[11],targetTitle:a[12]})},function(e){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return a[2]===b.messageId&&c.i64.eq(a[0],b.threadKey)}).next().then(function(a,e){var f=a.done;a=a.value;return f?d[1]=void 0:(e=a.item,c.sequence([function(a){return d[7]=e.metadataDataclass,d[7]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),d[7]).then(function(a){return a=a,d[8]=a[0],a})},function(a){return d[9]=new c.Map(),d[56]="sticker",d[10]=d[8].get(d[56]),d[8],d[10]?d[11]=!1:d[11]=!0,d[11]?0:(d[10]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[86]="sticker_pack_id",d[82]=d[10].get(d[86]),d[10],d[82]!==void 0?d[81].set(d[86],d[82]):0,d[87]="sticker_id",d[83]=d[10].get(d[87]),d[10],d[83]!==void 0?d[81].set(d[87],d[83]):0,d[88]="avatar_style",d[84]=d[10].get(d[88]),d[10],d[84]!==void 0?d[81].set(d[88],d[84]):0,d[89]="avatar_revision_id",d[85]=d[10].get(d[89]),d[10],d[85]!==void 0?(d[85]!==void 0?d[90]=c.i64.from_string(d[85]):d[90]=void 0,d[81].set(d[89],d[90])):0,d[80]=d[81]),d[9].set(d[56],d[80])),d[57]="word_effects",d[12]=d[8].get(d[57]),d[8],d[12]?d[13]=!1:d[13]=!0,d[13]?c.resolve():c.sequence([function(a){return d[12]?d[79]=!1:d[79]=!0,d[79]?c.resolve(d[80]=void 0):c.sequence([function(a){return d[81]=new c.Map(),d[88]="magic_word_offsets",d[82]=d[12].get(d[88]),d[12],d[82]?d[83]=!1:d[83]=!0,d[83]?c.resolve():c.sequence([function(a){return d[91]=c.createArray(),d[92]=c.i64.of_int32(d[82].length),c.i64.gt(d[92],c.i64.cast([0,0]))?c.loopAsync(d[92],function(a){return d[93]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[82],d[93]).then(function(a){return a=a,d[94]=a[0],d[95]=a[1],a})},function(a){return d[96]=(d[91].push(d[94]),d[91])}])}):c.resolve()},function(a){return d[81].set(d[88],d[91])}])},function(a){return d[89]="magic_word_lengths",d[84]=d[12].get(d[89]),d[12],d[84]?d[85]=!1:d[85]=!0,d[85]?c.resolve():c.sequence([function(a){return d[91]=c.createArray(),d[92]=c.i64.of_int32(d[84].length),c.i64.gt(d[92],c.i64.cast([0,0]))?c.loopAsync(d[92],function(a){return d[93]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[84],d[93]).then(function(a){return a=a,d[94]=a[0],d[95]=a[1],a})},function(a){return d[96]=(d[91].push(d[94]),d[91])}])}):c.resolve()},function(a){return d[81].set(d[89],d[91])}])},function(a){return d[90]="magic_word_emojis",d[86]=d[12].get(d[90]),d[12],d[86]?d[87]=!1:d[87]=!0,d[87]?c.resolve():c.sequence([function(a){return d[86]?d[91]=!1:d[91]=!0,d[91]?c.resolve(d[92]=void 0):c.sequence([function(a){return d[93]=c.createArray(),d[94]=c.i64.of_int32(d[86].length),c.i64.gt(d[94],c.i64.cast([0,0]))?c.loopAsync(d[94],function(a){return d[95]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[86],d[95]).then(function(a){return a=a,d[96]=a[0],d[97]=a[1],a})},function(a){return d[98]=(d[93].push(d[96]),d[93])}])}):c.resolve()},function(a){return d[92]=d[93]}])},function(a){return d[81].set(d[90],d[92])}])},function(a){return d[80]=d[81]}])},function(a){return d[9].set(d[57],d[80])}])},function(a){return d[58]="ig_avatar_sticker",d[14]=d[8].get(d[58]),d[8],d[14]?d[15]=!1:d[15]=!0,d[15]?0:(d[14]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[83]="is_avatar_sticker",d[82]=d[14].get(d[83]),d[14],d[82]!==void 0?d[81].set(d[83],d[82]):0,d[80]=d[81]),d[9].set(d[58],d[80])),d[59]="power_up",d[16]=d[8].get(d[59]),d[8],d[16]?d[17]=!1:d[17]=!0,d[17]?0:(d[16]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[83]="power_up_style",d[82]=d[16].get(d[83]),d[16],d[82]!==void 0?d[81].set(d[83],d[82]):0,d[80]=d[81]),d[9].set(d[59],d[80])),d[60]="ai_bot",d[18]=d[8].get(d[60]),d[8],d[18]?d[19]=!1:d[19]=!0,d[19]?c.resolve():c.sequence([function(a){return d[18]?d[79]=!1:d[79]=!0,d[79]?c.resolve(d[80]=void 0):c.sequence([function(a){return d[81]=new c.Map(),d[100]="response_id",d[82]=d[18].get(d[100]),d[18],d[82]!==void 0?d[81].set(d[100],d[82]):0,d[101]="bot_action",d[83]=d[18].get(d[101]),d[18],d[83]!==void 0?d[81].set(d[101],d[83]):0,d[102]="sentiment",d[84]=d[18].get(d[102]),d[18],d[84]!==void 0?d[81].set(d[102],d[84]):0,d[103]="sentiment_intensity",d[85]=d[18].get(d[103]),d[18],d[85]!==void 0?d[81].set(d[103],d[85]):0,d[104]="bot_action_int",d[86]=d[18].get(d[104]),d[18],c.i64.neq(d[86],void 0)?d[81].set(d[104],d[86]):0,d[105]="sentiment_int",d[87]=d[18].get(d[105]),d[18],c.i64.neq(d[87],void 0)?d[81].set(d[105],d[87]):0,d[106]="sentiment_intensity_int",d[88]=d[18].get(d[106]),d[18],c.i64.neq(d[88],void 0)?d[81].set(d[106],d[88]):0,d[107]="bot_invocation_message_id",d[89]=d[18].get(d[107]),d[18],d[89]!==void 0?d[81].set(d[107],d[89]):0,d[108]="bot_response_id",d[90]=d[18].get(d[108]),d[18],d[90]!==void 0?d[81].set(d[108],d[90]):0,d[109]="bot_invocation_message_otid",d[91]=d[18].get(d[109]),d[18],d[91]!==void 0?d[81].set(d[109],d[91]):0,d[110]="bot_invocation_logging_id",d[92]=d[18].get(d[110]),d[18],d[92]!==void 0?d[81].set(d[110],d[92]):0,d[111]="is_error",d[93]=d[18].get(d[111]),d[18],d[93]!==void 0?d[81].set(d[111],d[93]):0,d[112]="bot_subscription_id",d[94]=d[18].get(d[112]),d[18],d[94]!==void 0?(d[94]!==void 0?d[117]=c.i64.from_string(d[94]):d[117]=void 0,d[81].set(d[112],d[117])):0,d[113]="bot_subscription_product_type",d[95]=d[18].get(d[113]),d[18],d[95]!==void 0?d[81].set(d[113],d[95]):0,d[114]="bot_response_product_type",d[96]=d[18].get(d[114]),d[18],d[96]!==void 0?d[81].set(d[114],d[96]):0,d[115]="original_prompt_text",d[97]=d[18].get(d[115]),d[18],d[97]!==void 0?d[81].set(d[115],d[97]):0,d[116]="bot_response_additional_message_otids",d[98]=d[18].get(d[116]),d[18],d[98]?d[99]=!1:d[99]=!0,d[99]?c.resolve():c.sequence([function(a){return d[98]?d[117]=!1:d[117]=!0,d[117]?c.resolve(d[118]=void 0):c.sequence([function(a){return d[119]=c.createArray(),d[120]=c.i64.of_int32(d[98].length),c.i64.gt(d[120],c.i64.cast([0,0]))?c.loopAsync(d[120],function(a){return d[121]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[98],d[121]).then(function(a){return a=a,d[122]=a[0],d[123]=a[1],a})},function(a){return d[124]=(d[119].push(d[122]),d[119])}])}):c.resolve()},function(a){return d[118]=d[119]}])},function(a){return d[81].set(d[116],d[118])}])},function(a){return d[80]=d[81]}])},function(a){return d[9].set(d[60],d[80])}])},function(a){return d[61]="pobox",d[20]=d[8].get(d[61]),d[8],d[20]?d[21]=!1:d[21]=!0,d[21]?0:(d[20]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[84]="pobox_fbid",d[82]=d[20].get(d[84]),d[20],d[82]!==void 0?(d[82]!==void 0?d[86]=c.i64.from_string(d[82]):d[86]=void 0,d[81].set(d[84],d[86])):0,d[85]="pobox_id",d[83]=d[20].get(d[85]),d[20],d[83]!==void 0?d[81].set(d[85],d[83]):0,d[80]=d[81]),d[9].set(d[61],d[80])),d[62]="video",d[22]=d[8].get(d[62]),d[8],d[22]?d[23]=!1:d[23]=!0,d[23]?0:(d[22]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[83]="unified_upload_mos",d[82]=d[22].get(d[83]),d[22],d[82]!==void 0?d[81].set(d[83],d[82]):0,d[80]=d[81]),d[9].set(d[62],d[80])),d[63]="text_translation",d[24]=d[8].get(d[63]),d[8],d[24]?d[25]=!1:d[25]=!0,d[25]?0:(d[24]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[85]="translated_text",d[82]=d[24].get(d[85]),d[24],d[82]!==void 0?d[81].set(d[85],d[82]):0,d[86]="text_dialect",d[83]=d[24].get(d[86]),d[24],d[83]!==void 0?d[81].set(d[86],d[83]):0,d[87]="translated_text_dialect",d[84]=d[24].get(d[87]),d[24],d[84]!==void 0?d[81].set(d[87],d[84]):0,d[80]=d[81]),d[9].set(d[63],d[80])),d[64]="memories",d[26]=d[8].get(d[64]),d[8],d[26]?d[27]=!1:d[27]=!0,d[27]?0:(d[26]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[85]="original_message_id",d[82]=d[26].get(d[85]),d[26],d[82]!==void 0?d[81].set(d[85],d[82]):0,d[86]="original_message_creation_ts",d[83]=d[26].get(d[86]),d[26],d[83]!==void 0?(d[83]!==void 0?d[88]=c.i64.from_string(d[83]):d[88]=void 0,d[81].set(d[86],d[88])):0,d[87]="memory_server_id",d[84]=d[26].get(d[87]),d[26],d[84]!==void 0?(d[84]!==void 0?d[88]=c.i64.from_string(d[84]):d[88]=void 0,d[81].set(d[87],d[88])):0,d[80]=d[81]),d[9].set(d[64],d[80])),d[65]="command",d[28]=d[8].get(d[65]),d[8],d[28]?d[29]=!1:d[29]=!0,d[29]?0:(d[28]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[83]="command_type",d[82]=d[28].get(d[83]),d[28],c.i64.neq(d[82],void 0)?d[81].set(d[83],d[82]):0,d[80]=d[81]),d[9].set(d[65],d[80])),d[66]="admin_message",d[30]=d[8].get(d[66]),d[8],d[30]?d[31]=!1:d[31]=!0,d[31]?0:(d[30]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[92]="ad_client_token",d[82]=d[30].get(d[92]),d[30],d[82]!==void 0?d[81].set(d[92],d[82]):0,d[93]="ad_preference_url",d[83]=d[30].get(d[93]),d[30],d[83]!==void 0?d[81].set(d[93],d[83]):0,d[94]="ad_help_url",d[84]=d[30].get(d[94]),d[30],d[84]!==void 0?d[81].set(d[94],d[84]):0,d[95]="show_ad_choice_icon",d[85]=d[30].get(d[95]),d[30],d[85]!==void 0?d[81].set(d[95],d[85]):0,d[96]="title",d[86]=d[30].get(d[96]),d[30],d[86]!==void 0?d[81].set(d[96],d[86]):0,d[97]="action_url",d[87]=d[30].get(d[97]),d[30],d[87]!==void 0?d[81].set(d[97],d[87]):0,d[98]="admin_message_nickname_participant_id",d[88]=d[30].get(d[98]),d[30],d[88]!==void 0?(d[88]!==void 0?d[102]=c.i64.from_string(d[88]):d[102]=void 0,d[81].set(d[98],d[102])):0,d[99]="target_id",d[89]=d[30].get(d[99]),d[30],d[89]!==void 0?(d[89]!==void 0?d[102]=c.i64.from_string(d[89]):d[102]=void 0,d[81].set(d[99],d[102])):0,d[100]="target_title",d[90]=d[30].get(d[100]),d[30],d[90]!==void 0?d[81].set(d[100],d[90]):0,d[101]="identifier_name",d[91]=d[30].get(d[101]),d[30],d[91]!==void 0?d[81].set(d[101],d[91]):0,d[80]=d[81]),d[9].set(d[66],d[80])),d[67]="misinfo_metadata",d[32]=d[8].get(d[67]),d[8],d[32]?d[33]=!1:d[33]=!0,d[33]?0:(d[32]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[84]="has_misinfo",d[82]=d[32].get(d[84]),d[32],d[82]!==void 0?d[81].set(d[84],d[82]):0,d[85]="misinfo_source",d[83]=d[32].get(d[85]),d[32],d[83]!==void 0?d[81].set(d[85],d[83]):0,d[80]=d[81]),d[9].set(d[67],d[80])),d[68]="forwarded_message",d[34]=d[8].get(d[68]),d[8],d[34]?d[35]=!1:d[35]=!0,d[35]?0:(d[34]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[84]="forwarded_from_thread_name",d[82]=d[34].get(d[84]),d[34],d[82]!==void 0?d[81].set(d[84],d[82]):0,d[85]="forwarded_from_thread_url",d[83]=d[34].get(d[85]),d[34],d[83]!==void 0?d[81].set(d[85],d[83]):0,d[80]=d[81]),d[9].set(d[68],d[80])),d[69]="ai_metadata",d[36]=d[8].get(d[69]),d[8],d[36]?d[37]=!1:d[37]=!0,d[37]?0:(d[36]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[86]="is_ai_generated",d[82]=d[36].get(d[86]),d[36],d[82]!==void 0?d[81].set(d[86],d[82]):0,d[87]="gen_ai_integrity_ent_id",d[83]=d[36].get(d[87]),d[36],d[83]!==void 0?(d[83]!==void 0?d[90]=c.i64.from_string(d[83]):d[90]=void 0,d[81].set(d[87],d[90])):0,d[88]="ai_product",d[84]=d[36].get(d[88]),d[36],d[84]!==void 0?d[81].set(d[88],d[84]):0,d[89]="original_prompt_text",d[85]=d[36].get(d[89]),d[36],d[85]!==void 0?d[81].set(d[89],d[85]):0,d[80]=d[81]),d[9].set(d[69],d[80])),d[70]="encrypted_message",d[38]=d[8].get(d[70]),d[8],d[38]?d[39]=!1:d[39]=!0,d[39]?c.resolve():c.sequence([function(a){return d[38]?d[79]=!1:d[79]=!0,d[79]?c.resolve(d[80]=void 0):c.sequence([function(a){return d[81]=new c.Map(),d[89]="thread_id",d[82]=d[38].get(d[89]),d[38],d[82]!==void 0?d[81].set(d[89],d[82]):0,d[90]="offline_threading_id",d[83]=d[38].get(d[90]),d[38],d[83]!==void 0?d[81].set(d[90],d[83]):0,d[91]="toplevel_payload",d[84]=d[38].get(d[91]),d[38],d[84]?d[85]=!1:d[85]=!0,d[85]?0:(d[94]=new c.Map(),d[100]="encrypted_payload",d[95]=d[84].get(d[100]),d[84],d[95]!==void 0?d[94].set(d[100],d[95]):0,d[101]="payloadTimestampMs",d[96]=d[84].get(d[101]),d[84],d[96]!==void 0?d[94].set(d[101],c.i64.from_string(d[96])):0,d[102]="encryption_version",d[97]=d[84].get(d[102]),d[84],c.i64.neq(d[97],void 0)?d[94].set(d[102],d[97]):0,d[103]="epoch_id",d[98]=d[84].get(d[103]),d[84],d[98]!==void 0?d[94].set(d[103],c.i64.from_string(d[98])):0,d[104]="epoch_anon_id",d[99]=d[84].get(d[104]),d[84],d[99]!==void 0?d[94].set(d[104],d[99]):0,d[81].set(d[91],d[94])),d[92]="supplemental_payloads",d[86]=d[38].get(d[92]),d[38],d[86]?d[87]=!1:d[87]=!0,d[87]?c.resolve():c.sequence([function(a){return d[94]=c.createArray(),d[95]=c.i64.of_int32(d[86].length),c.i64.gt(d[95],c.i64.cast([0,0]))?c.loopAsync(d[95],function(a){return d[96]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[86],d[96]).then(function(a){return a=a,d[97]=a[0],d[98]=a[1],a})},function(a){return d[99]=new c.Map(),d[104]="encrypted_supplemental_key",d[100]=d[97].get(d[104]),d[97],d[100]!==void 0?d[99].set(d[104],d[100]):0,d[105]="supplemental_key_ciphertext",d[101]=d[97].get(d[105]),d[97],d[101]!==void 0?d[99].set(d[105],d[101]):0,d[106]="encrypted_supplemental_payload",d[102]=d[97].get(d[106]),d[97],d[102]?d[103]=!1:d[103]=!0,d[103]?0:(d[107]=new c.Map(),d[113]="encrypted_payload",d[108]=d[102].get(d[113]),d[102],d[108]!==void 0?d[107].set(d[113],d[108]):0,d[114]="payloadTimestampMs",d[109]=d[102].get(d[114]),d[102],d[109]!==void 0?d[107].set(d[114],c.i64.from_string(d[109])):0,d[115]="encryption_version",d[110]=d[102].get(d[115]),d[102],c.i64.neq(d[110],void 0)?d[107].set(d[115],d[110]):0,d[116]="epoch_id",d[111]=d[102].get(d[116]),d[102],d[111]!==void 0?d[107].set(d[116],c.i64.from_string(d[111])):0,d[117]="epoch_anon_id",d[112]=d[102].get(d[117]),d[102],d[112]!==void 0?d[107].set(d[117],d[112]):0,d[99].set(d[106],d[107])),d[107]=(d[94].push(d[99]),d[94])}])}):c.resolve()},function(a){return d[81].set(d[92],d[94])}])},function(a){return d[93]="is_open_eb",d[88]=d[38].get(d[93]),d[38],d[88]!==void 0?d[81].set(d[93],d[88]):0,d[80]=d[81]}])},function(a){return d[9].set(d[70],d[80])}])},function(a){return d[71]="rich_text",d[40]=d[8].get(d[71]),d[8],d[40]?d[41]=!1:d[41]=!0,d[41]?0:(d[40]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[83]="rich_text_format_type",d[82]=d[40].get(d[83]),d[40],c.i64.neq(d[82],void 0)?d[81].set(d[83],d[82]):0,d[80]=d[81]),d[9].set(d[71],d[80])),d[72]="content_logging_metadata",d[42]=d[8].get(d[72]),d[8],d[42]?d[43]=!1:d[43]=!0,d[43]?c.resolve():c.sequence([function(a){return d[42]?d[79]=!1:d[79]=!0,d[79]?c.resolve(d[80]=void 0):c.sequence([function(a){return d[81]=new c.Map(),d[86]="containing_post",d[82]=d[42].get(d[86]),d[42],d[82]?d[83]=!1:d[83]=!0,d[83]?c.resolve():c.sequence([function(a){return d[82]?d[88]=!1:d[88]=!0,d[88]?c.resolve(d[89]=void 0):c.sequence([function(a){return d[90]=new c.Map(),d[98]="key_type",d[91]=d[82].get(d[98]),d[82],d[91]!==void 0?d[90].set(d[98],d[91]):0,d[99]="fb_post_type",d[92]=d[82].get(d[99]),d[82],d[92]?d[93]=!1:d[93]=!0,d[93]?c.resolve():c.sequence([function(a){return d[92]?d[102]=!1:d[102]=!0,d[102]?c.resolve(d[103]=void 0):c.sequence([function(a){return d[104]=c.createArray(),d[105]=c.i64.of_int32(d[92].length),c.i64.gt(d[105],c.i64.cast([0,0]))?c.loopAsync(d[105],function(a){return d[106]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[92],d[106]).then(function(a){return a=a,d[107]=a[0],d[108]=a[1],a})},function(a){return d[109]=(d[104].push(d[107]),d[104])}])}):c.resolve()},function(a){return d[103]=d[104]}])},function(a){return d[90].set(d[99],d[103])}])},function(a){return d[100]="photos",d[94]=d[82].get(d[100]),d[82],d[94]?d[95]=!1:d[95]=!0,d[95]?c.resolve():c.sequence([function(a){return d[94]?d[102]=!1:d[102]=!0,d[102]?c.resolve(d[103]=void 0):c.sequence([function(a){return d[104]=c.createArray(),d[105]=c.i64.of_int32(d[94].length),c.i64.gt(d[105],c.i64.cast([0,0]))?c.loopAsync(d[105],function(a){return d[106]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[94],d[106]).then(function(a){return a=a,d[107]=a[0],d[108]=a[1],a})},function(a){return d[109]=new c.Map(),d[111]="key_type",d[110]=d[107].get(d[111]),d[107],d[110]!==void 0?d[109].set(d[111],d[110]):0,d[112]=(d[104].push(d[109]),d[104])}])}):c.resolve()},function(a){return d[103]=d[104]}])},function(a){return d[90].set(d[100],d[103])}])},function(a){return d[101]="videos",d[96]=d[82].get(d[101]),d[82],d[96]?d[97]=!1:d[97]=!0,d[97]?c.resolve():c.sequence([function(a){return d[96]?d[102]=!1:d[102]=!0,d[102]?c.resolve(d[103]=void 0):c.sequence([function(a){return d[104]=c.createArray(),d[105]=c.i64.of_int32(d[96].length),c.i64.gt(d[105],c.i64.cast([0,0]))?c.loopAsync(d[105],function(a){return d[106]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[96],d[106]).then(function(a){return a=a,d[107]=a[0],d[108]=a[1],a})},function(a){return d[109]=new c.Map(),d[111]="key_type",d[110]=d[107].get(d[111]),d[107],d[110]!==void 0?d[109].set(d[111],d[110]):0,d[112]=(d[104].push(d[109]),d[104])}])}):c.resolve()},function(a){return d[103]=d[104]}])},function(a){return d[90].set(d[101],d[103])}])},function(a){return d[89]=d[90]}])},function(a){return d[81].set(d[86],d[89])}])},function(a){return d[87]="metadata",d[84]=d[42].get(d[87]),d[42],d[84]?d[85]=!1:d[85]=!0,d[85]?c.resolve():c.sequence([function(a){return d[84]?d[88]=!1:d[88]=!0,d[88]?c.resolve(d[89]=void 0):c.sequence([function(a){return d[90]=d[84].get("__typename"),d[84],d[90]==="XMSGGroupsContentLoggingMetadata"?c.resolve((d[92]=new c.Map(),d[94]="num_members",d[93]=d[84].get(d[94]),d[84],c.i64.neq(d[93],void 0)?d[92].set(d[94],d[93]):0,d[91]=d[92])):c.sequence([function(a){return function(a){c.logger(a).warn(a)}(["Unknown subtype for LSXMSGContentLoggingMetadataUnion: ","",d[90]].join("")),d[92]=new c.Map(),d[93]=d[84].keys(),d[94]=c.i64.of_int32(d[93].length),c.i64.gt(d[94],c.i64.cast([0,0]))?c.loopAsync(d[94],function(a){return d[95]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[93],d[95]).then(function(a){return a=a,d[96]=a[0],d[97]=a[1],a})},function(a){return d[98]=d[84].get(d[96]),d[84],d[92].set(d[96],d[98])}])}):c.resolve()},function(a){return d[91]=d[92]}])},function(a){return d[91].set("__typename",d[90]),d[89]=d[91]}])},function(a){return d[81].set(d[87],d[89])}])},function(a){return d[80]=d[81]}])},function(a){return d[9].set(d[72],d[80])}])},function(a){return d[73]="suggested_moderation_actions",d[44]=d[8].get(d[73]),d[8],d[44]?d[45]=!1:d[45]=!0,d[45]?c.resolve():c.sequence([function(a){return d[44]?d[79]=!1:d[79]=!0,d[79]?c.resolve(d[80]=void 0):c.sequence([function(a){return d[81]=new c.Map(),d[85]="suggested_moderation_actions_list",d[82]=d[44].get(d[85]),d[44],d[82]?d[83]=!1:d[83]=!0,d[83]?c.resolve():c.sequence([function(a){return d[82]?d[87]=!1:d[87]=!0,d[87]?c.resolve(d[88]=void 0):c.sequence([function(a){return d[89]=new c.Map(),d[92]="suggested_moderation_actions",d[90]=d[82].get(d[92]),d[82],d[90]?d[91]=!1:d[91]=!0,d[91]?c.resolve():c.sequence([function(a){return d[90]?d[93]=!1:d[93]=!0,d[93]?c.resolve(d[94]=void 0):c.sequence([function(a){return d[95]=c.createArray(),d[96]=c.i64.of_int32(d[90].length),c.i64.gt(d[96],c.i64.cast([0,0]))?c.loopAsync(d[96],function(a){return d[97]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[90],d[97]).then(function(a){return a=a,d[98]=a[0],d[99]=a[1],a})},function(a){return d[100]=new c.Map(),d[103]="primary_action",d[101]=d[98].get(d[103]),d[98],d[101]!==void 0?d[100].set(d[103],d[101]):0,d[104]="chained_actions",d[102]=d[98].get(d[104]),d[98],d[102]!==void 0?d[100].set(d[104],d[102]):0,d[105]=(d[95].push(d[100]),d[95])}])}):c.resolve()},function(a){return d[94]=d[95]}])},function(a){return d[89].set(d[92],d[94])}])},function(a){return d[88]=d[89]}])},function(a){return d[81].set(d[85],d[88])}])},function(a){return d[86]="suggested_moderation_actions_json",d[84]=d[44].get(d[86]),d[44],d[84]!==void 0?d[81].set(d[86],d[84]):0,d[80]=d[81]}])},function(a){return d[9].set(d[73],d[80])}])},function(a){return d[74]="highlights_tab_custom_card_metadata",d[46]=d[8].get(d[74]),d[8],d[46]?d[47]=!1:d[47]=!0,d[47]?0:(d[46]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[84]="is_custom_card",d[82]=d[46].get(d[84]),d[46],d[82]!==void 0?d[81].set(d[84],d[82]):0,d[85]="moment",d[83]=d[46].get(d[85]),d[46],d[83]!==void 0?d[81].set(d[85],d[83]):0,d[80]=d[81]),d[9].set(d[74],d[80])),d[75]="highlights_tab_metadata",d[48]=d[8].get(d[75]),d[8],d[48]?d[49]=!1:d[49]=!0,d[49]?c.resolve():c.sequence([function(a){return d[48]?d[79]=!1:d[79]=!0,d[79]?c.resolve(d[80]=void 0):c.sequence([function(a){return d[81]=new c.Map(),d[85]="reply_source_type",d[82]=d[48].get(d[85]),d[48],d[82]!==void 0?d[81].set(d[85],d[82]):0,d[86]="reply_metadata",d[83]=d[48].get(d[86]),d[48],d[83]?d[84]=!1:d[84]=!0,d[84]?c.resolve():c.sequence([function(a){return d[83]?d[87]=!1:d[87]=!0,d[87]?c.resolve(d[88]=void 0):c.sequence([function(a){return d[89]=d[83].get("__typename"),d[83],d[89]==="XMSGHighlightsTabBirthdayReplyMetadata"?c.resolve((d[91]=new c.Map(),d[93]="birthday_age",d[92]=d[83].get(d[93]),d[83],c.i64.neq(d[92],void 0)?d[91].set(d[93],d[92]):0,d[90]=d[91])):c.sequence([function(a){return function(a){c.logger(a).warn(a)}(["Unknown subtype for LSXMSGHighlightsTabReplyMetadataUnion: ","",d[89]].join("")),d[91]=new c.Map(),d[92]=d[83].keys(),d[93]=c.i64.of_int32(d[92].length),c.i64.gt(d[93],c.i64.cast([0,0]))?c.loopAsync(d[93],function(a){return d[94]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[92],d[94]).then(function(a){return a=a,d[95]=a[0],d[96]=a[1],a})},function(a){return d[97]=d[83].get(d[95]),d[83],d[91].set(d[95],d[97])}])}):c.resolve()},function(a){return d[90]=d[91]}])},function(a){return d[90].set("__typename",d[89]),d[88]=d[90]}])},function(a){return d[81].set(d[86],d[88])}])},function(a){return d[80]=d[81]}])},function(a){return d[9].set(d[75],d[80])}])},function(a){return d[76]="business_thread_response_feedback",d[50]=d[8].get(d[76]),d[8],d[50]?d[51]=!1:d[51]=!0,d[51]?0:(d[50]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[83]="is_feedback_button_enabled_for_message",d[82]=d[50].get(d[83]),d[50],d[82]!==void 0?d[81].set(d[83],d[82]):0,d[80]=d[81]),d[9].set(d[76],d[80])),d[77]="live_shopping_metadata",d[52]=d[8].get(d[77]),d[8],d[52]?d[53]=!1:d[53]=!0,d[53]?0:(d[52]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[83]="referral_post_id",d[82]=d[52].get(d[83]),d[52],d[82]!==void 0?d[81].set(d[83],d[82]):0,d[80]=d[81]),d[9].set(d[77],d[80])),d[78]="reply_metadata",d[54]=d[8].get(d[78]),d[8],d[54]?d[55]=!1:d[55]=!0,d[55]?0:(d[54]?d[79]=!1:d[79]=!0,d[79]?d[80]=void 0:(d[81]=new c.Map(),d[83]="is_markdown",d[82]=d[54].get(d[83]),d[54],d[82]!==void 0?d[81].set(d[83],d[82]):0,d[80]=d[81]),d[9].set(d[78],d[80])),d[6]=d[9]}]):c.resolve((d[8]=new c.Map(),d[6]=d[8]))},function(a){return d[1]=d[6]}]))})},function(e){return d[1]?d[3]=!1:d[3]=!0,d[3]?0:(d[6]=new c.Map(),d[6].set("ad_client_token",a[5]),d[6].set("ad_preference_url",a[6]),d[6].set("ad_help_url",a[7]),d[6].set("show_ad_choice_icon",a[8]),d[6].set("title",a[3]),d[6].set("action_url",a[9]),d[6].set("admin_message_nickname_participant_id",a[10]),d[6].set("target_id",a[11]),d[6].set("target_title",a[12]),d[6].set("identifier_name",void 0),d[1].set("admin_message",d[6])),d[1]?d[4]=!1:d[4]=!0,d[4]?c.resolve(d[5]=void 0):c.sequence([function(a){return d[6]=new c.Map(),d[54]="sticker",d[7]=d[1].get(d[54]),d[1],d[7]?d[8]=!1:d[8]=!0,d[8]?0:(d[7]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[86]="sticker_pack_id",d[82]=d[7].get(d[86]),d[7],d[82]!==void 0?d[81].set(d[86],d[82]):0,d[87]="sticker_id",d[83]=d[7].get(d[87]),d[7],d[83]!==void 0?d[81].set(d[87],d[83]):0,d[88]="avatar_style",d[84]=d[7].get(d[88]),d[7],d[84]!==void 0?d[81].set(d[88],d[84]):0,d[89]="avatar_revision_id",d[85]=d[7].get(d[89]),d[7],c.i64.neq(d[85],void 0)?(c.i64.neq(d[85],void 0)?d[90]=c.i64.to_string(d[85]):d[90]=void 0,d[81].set(d[89],d[90])):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[54],d[78]):0),d[55]="word_effects",d[9]=d[1].get(d[55]),d[1],d[9]?d[10]=!1:d[10]=!0,d[10]?0:(d[9]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[88]="magic_word_offsets",d[82]=d[9].get(d[88]),d[9],d[82]?d[83]=!1:d[83]=!0,d[83]?0:d[81].set(d[88],d[82]),d[89]="magic_word_lengths",d[84]=d[9].get(d[89]),d[9],d[84]?d[85]=!1:d[85]=!0,d[85]?0:d[81].set(d[89],d[84]),d[90]="magic_word_emojis",d[86]=d[9].get(d[90]),d[9],d[86]?d[87]=!1:d[87]=!0,d[87]?0:(d[91]=c.i64.of_int32(d[86].length),c.i64.neq(d[91],c.i64.cast([0,0]))?d[81].set(d[90],d[86]):0),d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[55],d[78]):0),d[56]="ig_avatar_sticker",d[11]=d[1].get(d[56]),d[1],d[11]?d[12]=!1:d[12]=!0,d[12]?0:(d[11]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[83]="is_avatar_sticker",d[82]=d[11].get(d[83]),d[11],d[82]!==void 0?d[81].set(d[83],d[82]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[56],d[78]):0),d[57]="power_up",d[13]=d[1].get(d[57]),d[1],d[13]?d[14]=!1:d[14]=!0,d[14]?0:(d[13]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[83]="power_up_style",d[82]=d[13].get(d[83]),d[13],d[82]!==void 0?d[81].set(d[83],d[82]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[57],d[78]):0),d[58]="ai_bot",d[15]=d[1].get(d[58]),d[1],d[15]?d[16]=!1:d[16]=!0,d[16]?0:(d[15]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[100]="response_id",d[82]=d[15].get(d[100]),d[15],d[82]!==void 0?d[81].set(d[100],d[82]):0,d[101]="bot_action",d[83]=d[15].get(d[101]),d[15],d[83]!==void 0?d[81].set(d[101],d[83]):0,d[102]="sentiment",d[84]=d[15].get(d[102]),d[15],d[84]!==void 0?d[81].set(d[102],d[84]):0,d[103]="sentiment_intensity",d[85]=d[15].get(d[103]),d[15],d[85]!==void 0?d[81].set(d[103],d[85]):0,d[104]="bot_action_int",d[86]=d[15].get(d[104]),d[15],c.i64.neq(d[86],void 0)?d[81].set(d[104],d[86]):0,d[105]="sentiment_int",d[87]=d[15].get(d[105]),d[15],c.i64.neq(d[87],void 0)?d[81].set(d[105],d[87]):0,d[106]="sentiment_intensity_int",d[88]=d[15].get(d[106]),d[15],c.i64.neq(d[88],void 0)?d[81].set(d[106],d[88]):0,d[107]="bot_invocation_message_id",d[89]=d[15].get(d[107]),d[15],d[89]!==void 0?d[81].set(d[107],d[89]):0,d[108]="bot_response_id",d[90]=d[15].get(d[108]),d[15],d[90]!==void 0?d[81].set(d[108],d[90]):0,d[109]="bot_invocation_message_otid",d[91]=d[15].get(d[109]),d[15],d[91]!==void 0?d[81].set(d[109],d[91]):0,d[110]="bot_invocation_logging_id",d[92]=d[15].get(d[110]),d[15],d[92]!==void 0?d[81].set(d[110],d[92]):0,d[111]="is_error",d[93]=d[15].get(d[111]),d[15],d[93]!==void 0?d[81].set(d[111],d[93]):0,d[112]="bot_subscription_id",d[94]=d[15].get(d[112]),d[15],c.i64.neq(d[94],void 0)?(c.i64.neq(d[94],void 0)?d[117]=c.i64.to_string(d[94]):d[117]=void 0,d[81].set(d[112],d[117])):0,d[113]="bot_subscription_product_type",d[95]=d[15].get(d[113]),d[15],d[95]!==void 0?d[81].set(d[113],d[95]):0,d[114]="bot_response_product_type",d[96]=d[15].get(d[114]),d[15],d[96]!==void 0?d[81].set(d[114],d[96]):0,d[115]="original_prompt_text",d[97]=d[15].get(d[115]),d[15],d[97]!==void 0?d[81].set(d[115],d[97]):0,d[116]="bot_response_additional_message_otids",d[98]=d[15].get(d[116]),d[15],d[98]?d[99]=!1:d[99]=!0,d[99]?0:(d[117]=c.i64.of_int32(d[98].length),c.i64.neq(d[117],c.i64.cast([0,0]))?d[81].set(d[116],d[98]):0),d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[58],d[78]):0),d[59]="pobox",d[17]=d[1].get(d[59]),d[1],d[17]?d[18]=!1:d[18]=!0,d[18]?0:(d[17]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[84]="pobox_fbid",d[82]=d[17].get(d[84]),d[17],c.i64.neq(d[82],void 0)?(c.i64.neq(d[82],void 0)?d[86]=c.i64.to_string(d[82]):d[86]=void 0,d[81].set(d[84],d[86])):0,d[85]="pobox_id",d[83]=d[17].get(d[85]),d[17],d[83]!==void 0?d[81].set(d[85],d[83]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[59],d[78]):0),d[60]="video",d[19]=d[1].get(d[60]),d[1],d[19]?d[20]=!1:d[20]=!0,d[20]?0:(d[19]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[83]="unified_upload_mos",d[82]=d[19].get(d[83]),d[19],d[82]!==void 0?d[81].set(d[83],d[82]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[60],d[78]):0),d[61]="text_translation",d[21]=d[1].get(d[61]),d[1],d[21]?d[22]=!1:d[22]=!0,d[22]?0:(d[21]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[85]="translated_text",d[82]=d[21].get(d[85]),d[21],d[82]!==void 0?d[81].set(d[85],d[82]):0,d[86]="text_dialect",d[83]=d[21].get(d[86]),d[21],d[83]!==void 0?d[81].set(d[86],d[83]):0,d[87]="translated_text_dialect",d[84]=d[21].get(d[87]),d[21],d[84]!==void 0?d[81].set(d[87],d[84]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[61],d[78]):0),d[62]="memories",d[23]=d[1].get(d[62]),d[1],d[23]?d[24]=!1:d[24]=!0,d[24]?0:(d[23]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[85]="original_message_id",d[82]=d[23].get(d[85]),d[23],d[82]!==void 0?d[81].set(d[85],d[82]):0,d[86]="original_message_creation_ts",d[83]=d[23].get(d[86]),d[23],c.i64.neq(d[83],void 0)?(c.i64.neq(d[83],void 0)?d[88]=c.i64.to_string(d[83]):d[88]=void 0,d[81].set(d[86],d[88])):0,d[87]="memory_server_id",d[84]=d[23].get(d[87]),d[23],c.i64.neq(d[84],void 0)?(c.i64.neq(d[84],void 0)?d[88]=c.i64.to_string(d[84]):d[88]=void 0,d[81].set(d[87],d[88])):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[62],d[78]):0),d[63]="command",d[25]=d[1].get(d[63]),d[1],d[25]?d[26]=!1:d[26]=!0,d[26]?0:(d[25]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[83]="command_type",d[82]=d[25].get(d[83]),d[25],c.i64.neq(d[82],void 0)?d[81].set(d[83],d[82]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[63],d[78]):0),d[64]="admin_message",d[27]=d[1].get(d[64]),d[1],d[27]?d[28]=!1:d[28]=!0,d[28]?0:(d[27]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[92]="ad_client_token",d[82]=d[27].get(d[92]),d[27],d[82]!==void 0?d[81].set(d[92],d[82]):0,d[93]="ad_preference_url",d[83]=d[27].get(d[93]),d[27],d[83]!==void 0?d[81].set(d[93],d[83]):0,d[94]="ad_help_url",d[84]=d[27].get(d[94]),d[27],d[84]!==void 0?d[81].set(d[94],d[84]):0,d[95]="show_ad_choice_icon",d[85]=d[27].get(d[95]),d[27],d[85]!==void 0?d[81].set(d[95],d[85]):0,d[96]="title",d[86]=d[27].get(d[96]),d[27],d[86]!==void 0?d[81].set(d[96],d[86]):0,d[97]="action_url",d[87]=d[27].get(d[97]),d[27],d[87]!==void 0?d[81].set(d[97],d[87]):0,d[98]="admin_message_nickname_participant_id",d[88]=d[27].get(d[98]),d[27],c.i64.neq(d[88],void 0)?(c.i64.neq(d[88],void 0)?d[102]=c.i64.to_string(d[88]):d[102]=void 0,d[81].set(d[98],d[102])):0,d[99]="target_id",d[89]=d[27].get(d[99]),d[27],c.i64.neq(d[89],void 0)?(c.i64.neq(d[89],void 0)?d[102]=c.i64.to_string(d[89]):d[102]=void 0,d[81].set(d[99],d[102])):0,d[100]="target_title",d[90]=d[27].get(d[100]),d[27],d[90]!==void 0?d[81].set(d[100],d[90]):0,d[101]="identifier_name",d[91]=d[27].get(d[101]),d[27],d[91]!==void 0?d[81].set(d[101],d[91]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[64],d[78]):0),d[65]="misinfo_metadata",d[29]=d[1].get(d[65]),d[1],d[29]?d[30]=!1:d[30]=!0,d[30]?0:(d[29]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[84]="has_misinfo",d[82]=d[29].get(d[84]),d[29],d[82]!==void 0?d[81].set(d[84],d[82]):0,d[85]="misinfo_source",d[83]=d[29].get(d[85]),d[29],d[83]!==void 0?d[81].set(d[85],d[83]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[65],d[78]):0),d[66]="forwarded_message",d[31]=d[1].get(d[66]),d[1],d[31]?d[32]=!1:d[32]=!0,d[32]?0:(d[31]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[84]="forwarded_from_thread_name",d[82]=d[31].get(d[84]),d[31],d[82]!==void 0?d[81].set(d[84],d[82]):0,d[85]="forwarded_from_thread_url",d[83]=d[31].get(d[85]),d[31],d[83]!==void 0?d[81].set(d[85],d[83]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[66],d[78]):0),d[67]="ai_metadata",d[33]=d[1].get(d[67]),d[1],d[33]?d[34]=!1:d[34]=!0,d[34]?0:(d[33]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[86]="is_ai_generated",d[82]=d[33].get(d[86]),d[33],d[82]!==void 0?d[81].set(d[86],d[82]):0,d[87]="gen_ai_integrity_ent_id",d[83]=d[33].get(d[87]),d[33],c.i64.neq(d[83],void 0)?(c.i64.neq(d[83],void 0)?d[90]=c.i64.to_string(d[83]):d[90]=void 0,d[81].set(d[87],d[90])):0,d[88]="ai_product",d[84]=d[33].get(d[88]),d[33],d[84]!==void 0?d[81].set(d[88],d[84]):0,d[89]="original_prompt_text",d[85]=d[33].get(d[89]),d[33],d[85]!==void 0?d[81].set(d[89],d[85]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[67],d[78]):0),d[68]="encrypted_message",d[35]=d[1].get(d[68]),d[1],d[35]?d[36]=!1:d[36]=!0,d[36]?c.resolve():c.sequence([function(a){return d[35]?d[77]=!1:d[77]=!0,d[77]?c.resolve(d[78]=void 0):c.sequence([function(a){return d[81]=new c.Map(),d[89]="thread_id",d[82]=d[35].get(d[89]),d[35],d[82]!==void 0?d[81].set(d[89],d[82]):0,d[90]="offline_threading_id",d[83]=d[35].get(d[90]),d[35],d[83]!==void 0?d[81].set(d[90],d[83]):0,d[91]="toplevel_payload",d[84]=d[35].get(d[91]),d[35],d[84]?d[85]=!1:d[85]=!0,d[85]?0:(d[94]=new c.Map(),d[100]="encrypted_payload",d[95]=d[84].get(d[100]),d[84],d[95]!==void 0?d[94].set(d[100],d[95]):0,d[101]="payloadTimestampMs",d[96]=d[84].get(d[101]),d[84],c.i64.neq(d[96],void 0)?d[94].set(d[101],c.i64.to_string(d[96])):0,d[102]="encryption_version",d[97]=d[84].get(d[102]),d[84],c.i64.neq(d[97],void 0)?d[94].set(d[102],d[97]):0,d[103]="epoch_id",d[98]=d[84].get(d[103]),d[84],c.i64.neq(d[98],void 0)?d[94].set(d[103],c.i64.to_string(d[98])):0,d[104]="epoch_anon_id",d[99]=d[84].get(d[104]),d[84],d[99]!==void 0?d[94].set(d[104],d[99]):0,d[81].set(d[91],d[94])),d[92]="supplemental_payloads",d[86]=d[35].get(d[92]),d[35],d[86]?d[87]=!1:d[87]=!0,d[87]?c.resolve():c.sequence([function(a){return d[94]=c.createArray(),d[95]=c.i64.of_int32(d[86].length),c.i64.gt(d[95],c.i64.cast([0,0]))?c.loopAsync(d[95],function(a){return d[96]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[86],d[96]).then(function(a){return a=a,d[97]=a[0],d[98]=a[1],a})},function(a){return d[99]=new c.Map(),d[104]="encrypted_supplemental_key",d[100]=d[97].get(d[104]),d[97],d[100]!==void 0?d[99].set(d[104],d[100]):0,d[105]="supplemental_key_ciphertext",d[101]=d[97].get(d[105]),d[97],d[101]!==void 0?d[99].set(d[105],d[101]):0,d[106]="encrypted_supplemental_payload",d[102]=d[97].get(d[106]),d[97],d[102]?d[103]=!1:d[103]=!0,d[103]?0:(d[107]=new c.Map(),d[113]="encrypted_payload",d[108]=d[102].get(d[113]),d[102],d[108]!==void 0?d[107].set(d[113],d[108]):0,d[114]="payloadTimestampMs",d[109]=d[102].get(d[114]),d[102],c.i64.neq(d[109],void 0)?d[107].set(d[114],c.i64.to_string(d[109])):0,d[115]="encryption_version",d[110]=d[102].get(d[115]),d[102],c.i64.neq(d[110],void 0)?d[107].set(d[115],d[110]):0,d[116]="epoch_id",d[111]=d[102].get(d[116]),d[102],c.i64.neq(d[111],void 0)?d[107].set(d[116],c.i64.to_string(d[111])):0,d[117]="epoch_anon_id",d[112]=d[102].get(d[117]),d[102],d[112]!==void 0?d[107].set(d[117],d[112]):0,d[99].set(d[106],d[107])),d[107]=(d[94].push(d[99]),d[94])}])}):c.resolve()},function(a){return d[81].set(d[92],d[94])}])},function(a){return d[93]="is_open_eb",d[88]=d[35].get(d[93]),d[35],d[88]!==void 0?d[81].set(d[93],d[88]):0,d[78]=d[81]}])},function(a){return d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[68],d[78]):0}])},function(a){return d[69]="rich_text",d[37]=d[1].get(d[69]),d[1],d[37]?d[38]=!1:d[38]=!0,d[38]?0:(d[37]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[83]="rich_text_format_type",d[82]=d[37].get(d[83]),d[37],c.i64.neq(d[82],void 0)?d[81].set(d[83],d[82]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[69],d[78]):0),d[70]="content_logging_metadata",d[39]=d[1].get(d[70]),d[1],d[39]?d[40]=!1:d[40]=!0,d[40]?c.resolve():c.sequence([function(a){return d[39]?d[77]=!1:d[77]=!0,d[77]?c.resolve(d[78]=void 0):c.sequence([function(a){return d[81]=new c.Map(),d[86]="containing_post",d[82]=d[39].get(d[86]),d[39],d[82]?d[83]=!1:d[83]=!0,d[83]?c.resolve():c.sequence([function(a){return d[82]?d[88]=!1:d[88]=!0,d[88]?c.resolve(d[89]=void 0):c.sequence([function(a){return d[92]=new c.Map(),d[100]="key_type",d[93]=d[82].get(d[100]),d[82],d[93]!==void 0?d[92].set(d[100],d[93]):0,d[101]="fb_post_type",d[94]=d[82].get(d[101]),d[82],d[94]?d[95]=!1:d[95]=!0,d[95]?0:(d[104]=c.i64.of_int32(d[94].length),c.i64.neq(d[104],c.i64.cast([0,0]))?d[92].set(d[101],d[94]):0),d[102]="photos",d[96]=d[82].get(d[102]),d[82],d[96]?d[97]=!1:d[97]=!0,d[97]?c.resolve():c.sequence([function(a){return d[96]?d[104]=!1:d[104]=!0,d[104]?c.resolve(d[105]=void 0):c.sequence([function(a){return d[107]=c.createArray(),d[108]=c.i64.of_int32(d[96].length),c.i64.gt(d[108],c.i64.cast([0,0]))?c.loopAsync(d[108],function(a){return d[109]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[96],d[109]).then(function(a){return a=a,d[110]=a[0],d[111]=a[1],a})},function(a){return d[112]=new c.Map(),d[114]="key_type",d[113]=d[110].get(d[114]),d[110],d[113]!==void 0?d[112].set(d[114],d[113]):0,d[115]=(d[107].push(d[112]),d[107])}])}):c.resolve()},function(a){return d[105]=d[107]}])},function(a){return d[106]=c.i64.of_int32(d[105].length),c.i64.neq(d[106],c.i64.cast([0,0]))?d[92].set(d[102],d[105]):0}])},function(a){return d[103]="videos",d[98]=d[82].get(d[103]),d[82],d[98]?d[99]=!1:d[99]=!0,d[99]?c.resolve():c.sequence([function(a){return d[98]?d[104]=!1:d[104]=!0,d[104]?c.resolve(d[105]=void 0):c.sequence([function(a){return d[107]=c.createArray(),d[108]=c.i64.of_int32(d[98].length),c.i64.gt(d[108],c.i64.cast([0,0]))?c.loopAsync(d[108],function(a){return d[109]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[98],d[109]).then(function(a){return a=a,d[110]=a[0],d[111]=a[1],a})},function(a){return d[112]=new c.Map(),d[114]="key_type",d[113]=d[110].get(d[114]),d[110],d[113]!==void 0?d[112].set(d[114],d[113]):0,d[115]=(d[107].push(d[112]),d[107])}])}):c.resolve()},function(a){return d[105]=d[107]}])},function(a){return d[106]=c.i64.of_int32(d[105].length),c.i64.neq(d[106],c.i64.cast([0,0]))?d[92].set(d[103],d[105]):0}])},function(a){return d[89]=d[92]}])},function(a){return d[90]=d[89].keys(),d[91]=c.i64.of_int32(d[90].length),c.i64.neq(d[91],c.i64.cast([0,0]))?d[81].set(d[86],d[89]):0}])},function(a){return d[87]="metadata",d[84]=d[39].get(d[87]),d[39],d[84]?d[85]=!1:d[85]=!0,d[85]?0:(d[84]?d[88]=!1:d[88]=!0,d[88]?d[89]=void 0:(d[92]=d[84].get("__typename"),d[84],d[92]==="XMSGGroupsContentLoggingMetadata"?(d[94]=new c.Map(),d[96]="num_members",d[95]=d[84].get(d[96]),d[84],c.i64.neq(d[95],void 0)?d[94].set(d[96],d[95]):0,d[93]=d[94]):(function(a){c.logger(a).warn(a)}(["Unknown subtype for LSXMSGContentLoggingMetadataUnion: ","",d[92]].join("")),d[93]=d[84]),d[93].set("__typename",d[92]),d[89]=d[93]),d[90]=d[89].keys(),d[91]=c.i64.of_int32(d[90].length),c.i64.neq(d[91],c.i64.cast([0,0]))?d[81].set(d[87],d[89]):0),d[78]=d[81]}])},function(a){return d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[70],d[78]):0}])},function(a){return d[71]="suggested_moderation_actions",d[41]=d[1].get(d[71]),d[1],d[41]?d[42]=!1:d[42]=!0,d[42]?c.resolve():c.sequence([function(a){return d[41]?d[77]=!1:d[77]=!0,d[77]?c.resolve(d[78]=void 0):c.sequence([function(a){return d[81]=new c.Map(),d[85]="suggested_moderation_actions_list",d[82]=d[41].get(d[85]),d[41],d[82]?d[83]=!1:d[83]=!0,d[83]?c.resolve():c.sequence([function(a){return d[82]?d[87]=!1:d[87]=!0,d[87]?c.resolve(d[88]=void 0):c.sequence([function(a){return d[91]=new c.Map(),d[94]="suggested_moderation_actions",d[92]=d[82].get(d[94]),d[82],d[92]?d[93]=!1:d[93]=!0,d[93]?c.resolve():c.sequence([function(a){return d[92]?d[95]=!1:d[95]=!0,d[95]?c.resolve(d[96]=void 0):c.sequence([function(a){return d[98]=c.createArray(),d[99]=c.i64.of_int32(d[92].length),c.i64.gt(d[99],c.i64.cast([0,0]))?c.loopAsync(d[99],function(a){return d[100]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[92],d[100]).then(function(a){return a=a,d[101]=a[0],d[102]=a[1],a})},function(a){return d[103]=new c.Map(),d[106]="primary_action",d[104]=d[101].get(d[106]),d[101],d[104]!==void 0?d[103].set(d[106],d[104]):0,d[107]="chained_actions",d[105]=d[101].get(d[107]),d[101],d[105]!==void 0?d[103].set(d[107],d[105]):0,d[108]=(d[98].push(d[103]),d[98])}])}):c.resolve()},function(a){return d[96]=d[98]}])},function(a){return d[97]=c.i64.of_int32(d[96].length),c.i64.neq(d[97],c.i64.cast([0,0]))?d[91].set(d[94],d[96]):0}])},function(a){return d[88]=d[91]}])},function(a){return d[89]=d[88].keys(),d[90]=c.i64.of_int32(d[89].length),c.i64.neq(d[90],c.i64.cast([0,0]))?d[81].set(d[85],d[88]):0}])},function(a){return d[86]="suggested_moderation_actions_json",d[84]=d[41].get(d[86]),d[41],d[84]!==void 0?d[81].set(d[86],d[84]):0,d[78]=d[81]}])},function(a){return d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[71],d[78]):0}])},function(a){return d[72]="highlights_tab_custom_card_metadata",d[43]=d[1].get(d[72]),d[1],d[43]?d[44]=!1:d[44]=!0,d[44]?0:(d[43]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[84]="is_custom_card",d[82]=d[43].get(d[84]),d[43],d[82]!==void 0?d[81].set(d[84],d[82]):0,d[85]="moment",d[83]=d[43].get(d[85]),d[43],d[83]!==void 0?d[81].set(d[85],d[83]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[72],d[78]):0),d[73]="highlights_tab_metadata",d[45]=d[1].get(d[73]),d[1],d[45]?d[46]=!1:d[46]=!0,d[46]?0:(d[45]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[85]="reply_source_type",d[82]=d[45].get(d[85]),d[45],d[82]!==void 0?d[81].set(d[85],d[82]):0,d[86]="reply_metadata",d[83]=d[45].get(d[86]),d[45],d[83]?d[84]=!1:d[84]=!0,d[84]?0:(d[83]?d[87]=!1:d[87]=!0,d[87]?d[88]=void 0:(d[91]=d[83].get("__typename"),d[83],d[91]==="XMSGHighlightsTabBirthdayReplyMetadata"?(d[93]=new c.Map(),d[95]="birthday_age",d[94]=d[83].get(d[95]),d[83],c.i64.neq(d[94],void 0)?d[93].set(d[95],d[94]):0,d[92]=d[93]):(function(a){c.logger(a).warn(a)}(["Unknown subtype for LSXMSGHighlightsTabReplyMetadataUnion: ","",d[91]].join("")),d[92]=d[83]),d[92].set("__typename",d[91]),d[88]=d[92]),d[89]=d[88].keys(),d[90]=c.i64.of_int32(d[89].length),c.i64.neq(d[90],c.i64.cast([0,0]))?d[81].set(d[86],d[88]):0),d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[73],d[78]):0),d[74]="business_thread_response_feedback",d[47]=d[1].get(d[74]),d[1],d[47]?d[48]=!1:d[48]=!0,d[48]?0:(d[47]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[83]="is_feedback_button_enabled_for_message",d[82]=d[47].get(d[83]),d[47],d[82]!==void 0?d[81].set(d[83],d[82]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[74],d[78]):0),d[75]="live_shopping_metadata",d[49]=d[1].get(d[75]),d[1],d[49]?d[50]=!1:d[50]=!0,d[50]?0:(d[49]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[83]="referral_post_id",d[82]=d[49].get(d[83]),d[49],d[82]!==void 0?d[81].set(d[83],d[82]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[75],d[78]):0),d[76]="reply_metadata",d[51]=d[1].get(d[76]),d[1],d[51]?d[52]=!1:d[52]=!0,d[52]?0:(d[51]?d[77]=!1:d[77]=!0,d[77]?d[78]=void 0:(d[81]=new c.Map(),d[83]="is_markdown",d[82]=d[51].get(d[83]),d[51],d[82]!==void 0?d[81].set(d[83],d[82]):0,d[78]=d[81]),d[79]=d[78].keys(),d[80]=c.i64.of_int32(d[79].length),c.i64.neq(d[80],c.i64.cast([0,0]))?d[6].set(d[76],d[78]):0),d[53]=c.toJSON(d[6]),d[5]=d[53]}])},function(b){return c.forEach(c.filter(c.db.table(12).fetch([[[a[0],a[1],a[2]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.timestampMs,a[1])&&b.messageId===a[2]}),function(b){var c=b.update;b.item;return c({adminMsgCtaId:d[0],adminMsgCtaTitle:a[3],adminMsgCtaType:a[4],metadataDataclass:d[5]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxApplyAdminMessageCTAStoredProcedure";e.exports=a}),null);